<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PhD Countdown тАФ 6 Chapters (PWA)</title>
<meta name="theme-color" content="#7c3aed" />
<link rel="manifest" href="manifest.webmanifest">
<link rel="icon" href="icons/icon-192.png" sizes="192x192">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="PhD Countdown">

<style>
  :root{
    --bg:#0f1226;
    --card:#181b3a;
    --text:#e8e6ff;
    --muted:#b8b5ff;
    --accent1:#7c3aed;
    --accent2:#06b6d4;
    --accent3:#f97316;
    --good:#22c55e;
    --warn:#f59e0b;
    --bad:#ef4444;
  }
  *{box-sizing:border-box}
  body{
    margin:0;background:radial-gradient(1200px 600px at 10% -10%, #1a1d3b 0%, #0f1226 40%), var(--bg);
    color:var(--text);font:500 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Arial;
    min-height:100dvh; display:flex; flex-direction:column; gap:18px;
  }
  /* Top "notification" */
  .notice{
    position:sticky; top:0; z-index:50; padding:10px 14px;
    background:linear-gradient(90deg, rgba(124,58,237,.9), rgba(6,182,212,.9), rgba(249,115,22,.9));
    backdrop-filter: blur(6px);
    box-shadow:0 10px 30px rgba(0,0,0,.35);
    display:flex; align-items:center; gap:12px; overflow:hidden;
  }
  .glow{position:absolute; inset:0; pointer-events:none; mix-blend:screen; opacity:.75}
  .glow::before{
    content:""; position:absolute; inset:auto auto -80% -20%;
    width:140%; height:200%;
    background:radial-gradient(closest-side, rgba(255,255,255,.15), transparent 60%);
    animation: drift 14s linear infinite;
  }
  @keyframes drift{from{transform: translateX(0)} to{transform: translateX(-30%)}}
  .notice-badge{
    flex:0 0 auto; padding:6px 10px; border-radius:999px; font-weight:700;
    background:#0f1226; color:#fff; box-shadow: inset 0 0 0 2px rgba(255,255,255,.1);
  }
  .notice-text{display:flex; flex-wrap:wrap; gap:10px; align-items:center; font-size:15px}
  .ticker{display:inline-flex; gap:10px; font-weight:700}
  .ticker .chip{
    background:rgba(15,18,38,.25); padding:6px 10px; border-radius:10px; backdrop-filter: blur(4px);
  }
  .motivate{font-weight:700}
  .pulse{animation:pulse 1.3s ease-in-out infinite}
  @keyframes pulse{
    0%,100%{transform:scale(1); filter:drop-shadow(0 0 0 rgba(255,255,255,0))}
    50%{transform:scale(1.03); filter:drop-shadow(0 0 12px rgba(255,255,255,.35))}
  }

  /* Main */
  .container{width:min(980px, 92vw); margin:0 auto 40px; display:grid; gap:18px}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.04), transparent),
               radial-gradient(600px 140px at 10% -10%, rgba(124,58,237,.18), transparent 60%),
               var(--card);
    border:1px solid rgba(255,255,255,.08);
    border-radius:18px; padding:18px 16px; box-shadow:0 10px 30px rgba(0,0,0,.25);
  }
  h1{font-size:26px; margin:0 0 6px}
  .subtitle{color:var(--muted); margin-bottom:14px}
  .grid{display:grid; gap:14px}
  .grid.cols{grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); align-items:stretch}

  /* Countdown blocks */
  .countdown{display:flex; gap:10px; flex-wrap:wrap}
  .timebox{
    flex:1 1 120px; min-width:120px; text-align:center; padding:12px 10px; border-radius:14px;
    background:linear-gradient(180deg, rgba(124,58,237,.15), rgba(6,182,212,.08));
    border:1px solid rgba(255,255,255,.08);
  }
  .timebox strong{display:block; font-size:30px}
  .timebox span{color:var(--muted); font-size:13px}

  /* Progress bars */
  .bar{height:12px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden}
  .bar > i{display:block; height:100%; width:0%}
  .bar.time > i{background:linear-gradient(90deg, var(--accent2), var(--accent1))}
  .bar.work > i{background:linear-gradient(90deg, var(--good), #86efac)}
  .bar.behind > i{background:linear-gradient(90deg, var(--bad), #fb7185)}

  .row{display:flex; justify-content:space-between; gap:8px}
  .row small{color:var(--muted)}

  /* Controls */
  .controls{display:flex; flex-wrap:wrap; gap:12px; align-items:center}
  .pill{display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px;
        background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08)}
  .pill input[type="number"]{width:72px; background:transparent; border:none; color:var(--text); font-weight:700}
  .btn{
    cursor:pointer; user-select:none; padding:10px 14px; border-radius:12px; font-weight:700;
    border:1px solid rgba(255,255,255,.12);
    background:linear-gradient(90deg, rgba(124,58,237,.4), rgba(6,182,212,.35));
    color:#fff; transition:transform .1s ease;
  }
  .btn:active{transform: translateY(1px)}
  .hint{color:var(--muted); font-size:13px}

  .status{padding:10px 12px; border-radius:12px; font-weight:700}
  .status.good{background:rgba(34,197,94,.12); color:#bbf7d0; border:1px solid rgba(34,197,94,.25)}
  .status.ok{background:rgba(245,158,11,.12); color:#fde68a; border:1px solid rgba(245,158,11,.25)}
  .status.bad{background:rgba(239,68,68,.12); color:#fecaca; border:1px solid rgba(239,68,68,.25)}

  footer{opacity:.7; font-size:13px; text-align:center; margin:14px 0 24px}
  a{color:#c4b5fd}
</style>
</head>
<body>
  <!-- Persistent app notification -->
  <div class="notice pulse" id="notice">
    <div class="glow" aria-hidden="true"></div>
    <span class="notice-badge">ЁЯЪА рд▓рдХреНрд╖реНрдп</span>
    <div class="notice-text">
      <span class="motivate" id="motivate">рдЖрдЬ рдореЗрд╣рдирдд, рдХрд▓ рд╕рдлрд▓рддрд╛! тЬНя╕П</span>
      <span>тАв</span>
      <div class="ticker" id="ticker">
        <span class="chip">тП│ <b id="d">--</b> рджрд┐рди</span>
        <span class="chip"><b id="h">--</b> рдШрдВрдЯреЗ</span>
        <span class="chip"><b id="m">--</b> рдорд┐рдирдЯ</span>
        <span class="chip"><b id="s">--</b> рд╕реЗрдХрдВрдб</span>
      </div>
      <span>тАв</span>
      <span id="chaptersLeft">6/6 рдЕрдзреНрдпрд╛рдп рд╢реЗрд╖</span>
    </div>
  </div>

  <main class="container">
    <section class="card">
      <h1>ЁЯОУ PhD рд▓реЗрдЦрди рдХрд╛рдЙрдВрдЯрдбрд╛рдЙрди (Installable PWA)</h1>
      <div class="subtitle">Target: <b>6 chapters</b> тАв Deadline: <b>5 Jan 2026, 23:59</b> (Asia/Kolkata)</div>

      <div class="grid cols">
        <div class="grid">
          <div class="countdown">
            <div class="timebox"><strong id="d2">--</strong><span>Days</span></div>
            <div class="timebox"><strong id="h2">--</strong><span>Hours</span></div>
            <div class="timebox"><strong id="m2">--</strong><span>Minutes</span></div>
            <div class="timebox"><strong id="s2">--</strong><span>Seconds</span></div>
          </div>

          <div>
            <div class="row"><small>тП▒я╕П Time elapsed</small><small id="timePct">--%</small></div>
            <div class="bar time"><i id="timeBar"></i></div>
          </div>

          <div>
            <div class="row"><small>ЁЯУЪ Chapters completed</small><small id="workPct">0%</small></div>
            <div class="bar work" id="workBarWrap"><i id="workBar"></i></div>
          </div>

          <div id="paceStatus" class="status ok">рдкреЗрд╕ рдЪреЗрдХ рд╣реЛ рд░рд╣рд╛ рд╣реИтАж</div>
        </div>

        <div class="grid">
          <div class="card" style="background:rgba(255,255,255,.03)">
            <div class="controls">
              <span class="pill">тЬЕ рдкреВрд░реЗ рд╣реБрдП рдЕрдзреНрдпрд╛рдп:
                <input id="doneInput" type="number" min="0" max="6" step="1" />
              </span>
              <button class="btn" id="markBtn">Save Progress</button>
              <button class="btn" id="installBtn" style="display:none">ЁЯУ▓ Install App</button>
            </div>
            <p class="hint">Tip: рдЬреИрд╕реЗ-рдЬреИрд╕реЗ рдЕрдзреНрдпрд╛рдп рдХрдо рд╣реЛрддреЗ рдЬрд╛рдПрдБ, рдЯрд╛рдЗрдо рднреА рдХрдо рд╣реЛрддрд╛ рдЬрд╛рдПрдЧрд╛ тАФ рдЗрд╕рд▓рд┐рдП рд░реЛрдЬрд╝ рдереЛрдбрд╝рд╛-рдереЛрдбрд╝рд╛ рд▓рд┐рдЦреЗрдВред</p>
            <ul class="hint">
              <li>ЁЯУМ рдЖрдкрдХрд╛ рдкреНрд░реЛрдЧреНрд░реЗрд╕ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд╕реЗрд╡ рд╣реЛрддрд╛ рд╣реИ (localStorage).</li>
              <li>ЁЯФФ рдКрдкрд░ рдХреА рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди рд╣рдореЗрд╢рд╛ рдСрди рд░рд╣рддреА рд╣реИ рддрд╛рдХрд┐ рдлреЛрдХрд╕ рдмрдирд╛ рд░рд╣реЗ.</li>
              <li>ЁЯТб рд░реЛрдЬрд╝ рдирдпрд╛ рдореЛрдЯрд┐рд╡реЗрд╢рди рдореИрд╕реЗрдЬ рджрд┐рдЦреЗрдЧрд╛.</li>
              <li>ЁЯУ▓ рдиреАрдЪреЗ тАЬInstall AppтАЭ рдмрдЯрди рддрднреА рджрд┐рдЦреЗрдЧрд╛ рдЬрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЗрдЬрд╛рдЬрд╝рдд рджреЗрдЧрд╛.</li>
            </ul>
          </div>

          <div class="card" style="background:linear-gradient(180deg, rgba(6,182,212,.08), rgba(124,58,237,.08))">
            <h2 style="margin:0 0 8px; font-size:20px">ЁЯУИ TodayтАЩs Nudge</h2>
            <div id="nudgeText">тАФ</div>
          </div>
        </div>
      </div>
    </section>
    <footer>
      Made with тЭдя╕П for focus, flow, and finishing тЬи
    </footer>
  </main>

<script>
(function(){
  // ====== PWA install flow ======
  let deferredPrompt = null;
  const installBtn = document.getElementById('installBtn');
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = 'inline-flex';
  });
  installBtn?.addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    deferredPrompt = null;
    installBtn.style.display = 'none';
    console.log('Install choice:', outcome);
  });
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js').catch(console.error);
    });
  }

  // ====== Config ======
  const TOTAL_CHAPTERS = 6;
  // Deadline: 5 Jan 2026, 23:59 IST (+05:30)
  const TARGET_ISO = '2026-01-05T23:59:00+05:30';
  const target = new Date(TARGET_ISO);

  // Start anchor
  const START_KEY = 'phd_start_iso';
  const DONE_KEY  = 'phd_done';
  const start = new Date(localStorage.getItem(START_KEY) || new Date().toISOString());
  localStorage.setItem(START_KEY, start.toISOString());

  // ====== Elements ======
  const ids = s => document.getElementById(s);
  const d=ids('d'), h=ids('h'), m=ids('m'), s_=ids('s');
  const d2=ids('d2'), h2=ids('h2'), m2=ids('m2'), s2=ids('s2');
  const timeBar=ids('timeBar'), workBar=ids('workBar'), workBarWrap=ids('workBarWrap');
  const timePct=ids('timePct'), workPct=ids('workPct');
  const chaptersLeft=ids('chaptersLeft');
  const paceStatus=ids('paceStatus');
  const doneInput=ids('doneInput');
  const markBtn=ids('markBtn');
  const motivate=ids('motivate');
  const nudgeText=ids('nudgeText');

  // ====== Messages ======
  const messages = [
    "рдЖрдЬ рдереЛрдбрд╝рд╛ рд▓рд┐рдЦреЛ, рдХрд▓ рдмрд╣реБрдд рдЖрдЧреЗ рд░рд╣реЛрдЧреЗ. ЁЯТк",
    "Consistency рд╣реА рд╕реБрдкрд░рдкрд╛рд╡рд░ рд╣реИ. тЬНя╕П",
    "рдЫреЛрдЯреЗ рдХрджрдо, рдмрдбрд╝рд╛ рд╕рдлрд╝рд░. ЁЯЪ╢тАНтЩВя╕ПтЮбя╕ПЁЯОУ",
    "рдбреНрд░рд╛рдлреНрдЯ рдХрд░реЛтАФрдлрд┐рд░ рд╕реБрдзрд╛рд░ рд▓реЛ. ЁЯЫая╕П",
    "Focus: 30 рдорд┐рдирдЯ рдбреАрдк рд╡рд░реНрдХ рдЕрднреА! тП▒я╕П",
    "Perfection рдирд╣реАрдВ, рдкреНрд░рдЧрддрд┐! тЬЕ",
    "рддреБрдо рдХрд░ рд╕рдХрддреЗ рд╣реЛ. рдмрд╕ рд╢реБрд░реВ рдХрд░реЛ. ЁЯЪА",
  ];
  function dailyMessage(arr){
    const days = Math.floor(Date.now() / 86400000);
    return arr[days % arr.length];
  }

  // ====== Progress state ======
  function getDone(){
    const raw = localStorage.getItem(DONE_KEY);
    const n = Number(raw);
    return Number.isFinite(n) ? Math.min(Math.max(n,0), TOTAL_CHAPTERS) : 0;
  }
  function setDone(n){
    const clamped = Math.min(Math.max(Number(n)||0,0), TOTAL_CHAPTERS);
    localStorage.setItem(DONE_KEY, String(clamped));
    return clamped;
  }

  // ====== UI update ======
  function fmt2(n){return String(n).padStart(2,'0')}

  function updateCountdown(){
    const now = new Date();
    let diff = Math.max(0, target - now);
    const sec = Math.floor(diff/1000)%60;
    const min = Math.floor(diff/60000)%60;
    const hr  = Math.floor(diff/3600000)%24;
    const day = Math.floor(diff/86400000);
    d.textContent = day; h.textContent = fmt2(hr); m.textContent = fmt2(min); s_.textContent = fmt2(sec);
    d2.textContent= day; h2.textContent= fmt2(hr); m2.textContent= fmt2(min); s2.textContent= fmt2(sec);

    // Time progress (start -> target)
    const span = Math.max(1, target - start);
    const elapsed = Math.min(Math.max(0, now - start), span);
    const tPct = Math.round((elapsed / span) * 100);
    timePct.textContent = tPct + "%";
    timeBar.style.width = tPct + "%";
  }

  function updateWork(){
    const done = getDone();
    doneInput.value = done;
    const left = TOTAL_CHAPTERS - done;
    chaptersLeft.textContent = `${left}/${TOTAL_CHAPTERS} рдЕрдзреНрдпрд╛рдп рд╢реЗрд╖`;
    const wPct = Math.round((done / TOTAL_CHAPTERS) * 100);
    workPct.textContent = wPct + "%";
    workBar.style.width = wPct + "%";

    // Pace check
    const now = new Date();
    const span = Math.max(1, target - start);
    const elapsed = Math.min(Math.max(0, now - start), span);
    const tPct = (elapsed / span) * 100;
    const delta = wPct - tPct; // positive = ahead
    let cls="ok", txt="рдкреЗрд╕ рдареАрдХ рд╣реИ, рдЪрд▓рддреЗ рд░рд╣реЛ! ЁЯЩВ";
    if (delta >= 5){ cls="good"; txt="рд╢рд╛рдмрд╛рд╢! рдЖрдк рдЯрд╛рдЗрдо рд╕реЗ рдЖрдЧреЗ рд╣реИрдВ. ЁЯМЯ";}
    else if (delta <= -5){ cls="bad"; txt="рдкреЗрд╕ рдкреАрдЫреЗ рд╣реИ тАФ 30тАУ45 рдорд┐рдирдЯ рдЕрднреА рд▓рд┐рдЦреЗрдВ. ЁЯФе";}
    paceStatus.className = "status " + cls;
    paceStatus.textContent = txt;
    workBarWrap.className = "bar " + (delta < -5 ? "behind" : "work");
  }

  function updateNudge(){
    const left = TOTAL_CHAPTERS - getDone();
    const dayMsg = dailyMessage(messages);
    motivate.textContent = dayMsg;
    const msLeft = Math.max(0, target - new Date());
    const daysLeft = Math.ceil(msLeft / 86400000);
    const perDay = daysLeft > 0 ? Math.max(0, (left / daysLeft)) : left;
    nudgeText.textContent =
      (daysLeft>0)
      ? `ЁЯЧУя╕П ${daysLeft} рджрд┐рди рдмрдЪреЗ рд╣реИрдВ тАв ЁЯОп рд▓рдЧрднрдЧ ${perDay.toFixed(2)} рдЕрдзреНрдпрд╛рдп/рджрд┐рди рдХреА рд░рдлреНрддрд╛рд░ рд░рдЦреЗрдВ.`
      : `тП░ рд╕рдордп рдкреВрд░рд╛! рдЬреЛ рднреА рдмрдирд╛ рд╣реИ рдЙрд╕реЗ рдлрд╛рдЗрдирд▓рд╛рдЗрдЬ рдХрд░реЗрдВ рдФрд░ рд╕рдмрдорд┐рдЯ рдХреА рддреИрдпрд╛рд░реА рдХрд░реЗрдВ.`;
  }

  // Controls
  markBtn.addEventListener('click', ()=>{
    const val = Number(doneInput.value);
    setDone(val);
    updateWork();
    updateNudge();
  });

  // Init
  updateCountdown(); updateWork(); updateNudge();
  setInterval(()=>{ updateCountdown(); updateNudge(); }, 1000);
})();
</script>
</body>
</html>
